<div id="<%- id %>" style="
            height: <%- height %>;
            width: <%- width %>;
            margin: 0px;
            padding: 0px
            ">
</div>
<style>
  .gmnoprint img {
    max-width: none;
  }
</style>

<script defer="defer">
  window.hexoGmaps = window.hexoGmaps || { maps: {}};


  window.hexoGmaps.maps['init<%- id %>'] = function init() {

    console.log('making map', '<%- id %>');

    var mapOptions = {
      zoom: 8,
      center: new window.google.maps.LatLng( <%- center.latitude %> , <%- center.longitude %> ),
    };

    var target = document.getElementById('<%- id %>');

    var map = new window.google.maps.Map(target, mapOptions);
  }

  function makeMaps() {
    console.log('making every map')
    for (var map in window.hexoGmaps.maps) {
       console.log('map #', map);
       window.hexoGmaps.maps[map]();               
    }
  }

  function loadScript() {
    window.hexoGmaps.googleScriptLoaded = true;
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp&callback=makeMaps';
    document.body.appendChild(script);
  }

  if (!window.hexoGmaps.googleScriptLoaded) {
    console.log('load it!');
    loadScript();
  } else {
    console.log('skiploading');
  }
</script>